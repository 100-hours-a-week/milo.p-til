## 📅 날짜: 2025-02-11

### 💬 스크럼
- 학습 목표 1 : 크램폴린 특강 공부
- 학습 목표 2 : 컨테이너, 도커 및 쿠버네티스 공부

---
### 📒 공부한 내용
### 클라우드 특강 

로컬 : 스프링 부트, 우분투, 자바 등 버전이 다 맞아야 배포가 가능함

- 환경 간 차이가 발생하면 배포 및 실행에 문제가 생김

VM : host server, host os는 그대로 두고 하이퍼바이저 위에서 가상화 시켜서 사용

- 장점 : 호스트 서버의 환경에 영향을 주지 않고, 독립적인 게스트 OS에서 애플리케이션 실행이 가능함
- 단점 : 게스트 OS까지 전체를 실행해야 하므로 자원(emulation) 소모가 많아 무겁고, 확장성에 제한이 있음

이미지 : 컨테이너를 생성할 수 있는 실행 파일(패키지)로, 애플리케이션 실행에 필요한 모든 환경(라이브러리, 소스코드, 설정 등)을 포함

컨테이너 : guest os 필요가 없이 컨테이너 위에서 실행

- 유연한 확장 가능. 각각 모듈에 컨테이너 사용. 각 모듈별 확장 가능. 더 가벼움
- 컨테이너 : 어플리케이션 실행을 위한 모든 환경을 박스로 담아서 배포한다는 느낌

쿠버네티스 : 컨테이너를 잘 다룰 수 있는 기술. 컨테이너 오케스트레이션 툴임

- 9개 서버 → 4개 서버 가능 (3대씩 3개-아침 점심 저녁 필요하다고 가정)
- 오토스케일링을 통해 3대, 나머지 1대에 남은것들 집어넣을 수 있음
- 백업 서버의 경우도 원래는 1대씩 총 3개인데 1대로만 가능함 → 다른 환경이지만 컨테이너 환경에서는 대응 가능

쿠버네티스 기본 개념

- 클러스터 : 여러 개의 노드(컴퓨터 리소스-즉 서버) 로 이루어진 운영 환경
- 오브젝트 : namespace 단위로 묶임. default namespace
- IaC : infra as code. 모든 쿠버네티스 오브젝트들은 코드로 작성됨.

기본 오브젝트 종류

- 파드(pod) : 가장 작은 컴퓨팅 단위
- 레플리카셋 : 다수의 pod 관리. 장애 대응 시 중요. autoscaler와 함께 사용 시 파드 개수 자동 조절
- 디플로이먼트 : 새 이미지 생성(어플 버전 업데이트) 시 파드를 새로운 버전으로 업데이트
- 셀렉토 : 파드 구분을 위해 라벨을 붙이는 것
- 서비스 : 파드 그룹에 트래픽을 분산시키는 로드벨런서 같은 역할
---
### 카카오 클라우드 구조, 크램폴린 사용법

카카오 클라우드 배포 과정 (소스코드 다 작성한 상태에서)

1. ***이미지 빌드***
    - 이미지 : 앱 실행 패키지(exe 실행파일). 소스 코드 빌드 → 이미지 생성
    - D2hub : 도커의 빌드 기능을 활용해 컨테이너 이미지를 생성하는 역할
    - D2Hub 에서 이미지 빌드를 위해 도커파일 필요함 → 즉 깃허브 루트 디렉토리에 도커파일이 위치해야 함
        - 도커 파일 : 도커 이미지를 빌드하게 해주는 파일
    - 깃허브 연동 후 D2hub에 레포지토리 생성하고 이미지 빌드 실행
        - 빌드 : 소스코드를 모아 실행 가능한 이미지를 만드는 것
    - 이러면 깃허브에서 도커파일 및 소스코드로 이미지를 생성함(즉 실행파일을 생성함)
2. ***Kargo 배포 - 구성파일 작성***
    - Kargo : 쿠버네티스와 연동하여 이미지를 배포하고 관리하는 역할
    - 루트 디렉토리의 k8s(쿠버네티스) 폴더 하위에 있는 쿠버네티스 리소스 구성파일 작성 ⇒ 즉 yaml 파일을 작성
    - yaml에서는 k8s 폴더에 함께 있는 구성 파일들을 참조하도록 작성함
    - 🔥각 파일 작성 시 D2Hub 이미지 경로를 사용해서 작성 (빌드한 이미지 경로 복사해서 넣어야 함)🔥
    - 이후 배포 앱에 연결된 외부 접속 URL 발급을 위해  Ingress 객체 작성
    - 깃허브 main에 push
3. ***Kargo 배포 - App 생성***
    - 다 완료되었으면 Kargo에서 배포 버튼 클릭하여 앱 생성함
4. ***Kargo 배포 - k8s파일 유효성 확인***
    - 오류가 없는지 확인
5. ***Kargo 배포 - DKOS 클러스터 배포***
    - yaml에 명시된 이미지 주소를 타고 가서 D2Hub에 있는 이미지를 가져와 DKOS 클러스터에 배포함
6. ***외부 URL 등록***
    - 배포한 앱과 연결할 외부 URL 발급해야 함
    - 구성파일 작성 시 작성한 Ingress 객체의 IP를 특정 URL과 연결
    - IP가 자동으로 불려오고, 외부 접속 URL이 발급됨 (발급 버튼)
    - 이제 해당 URL로 app 접속 가능함
---    

### 클라우드, 도커, K8S

클라우드

- 공유 컴퓨팅 자원, 사용한 만큼만 비용 지불
- 서비스에만 집중 가능

클라우드 네이티브

- 클라우드 이점을 최대로 활용할 수 있도록 구축하고 실행
- CI/CD, DevOps, Containers, Microservies

CI/CD : 빌드,테스트 자동화 과정

- 코드 변경을 자동으로 통합, 빌드, 테스트한 후 문제 없으면 자동으로 배포하는 시스템으로, 개발 속도와 품질을 높여줌

DevOps : 개발 + 운영 방법론 시스템

- 개발자와 운영담당자 사이의 소통, 협업, 통합, 자동화 강조. 전체 생명주기가 서로 통합되어 관리됨

MSA(Microservices architecture) : 소규모 서비스로 나눠서 관리

- 분산된 여러 작은 앱 관리, 앱 별 다양한 런타임 환경, 트래픽 분산 관리 등 단점
- 컨테이너, 쿠버네티스로 단점 극복

컨테이너 : 어떤 환경에서나 실행 가능한 소프트웨어 패키지. 실행에 필요한 모든 요소를 싸서 갖추고 있는 상자.

- 어떤 환경에서도 OS에 구애받지 않고 실행 가능 (OS도 포함되어 있으므로)

Kubernetes(k8s) : 대규모 분산 서버 환경에서 컨테이너 관리를 자동화하는 플랫폼

- 컨테이너 오케스트레이터의 표준 기술
- 컨테이너 분산 스케쥴링, 상태 관리, 배포, 복구 등 제공

DKOS(datacenter of kakao os)

- 카카오의 클라우드 네이티브 인프라 환경에서 컨테이너 기반 애플리케이션을 손쉽게 배포, 관리, 확장할 수 있도록 하는 Kubernetes 기반의 서비스 플랫폼 (kaas)

카카오 클라우드

- 빌드 : 깃허브 레포지토리 → D2Hub → 젠킨스
- 배포 : 젠킨스 → 깃허브 레포 → Kargo → DKOS(k8s)
---

  
### 💭 오늘의 회고
- 성공적인 점 : 크램폴린 실습을 수행하면서 카카오 클라우드에서 빌드와 배포가 어떻게 이뤄지는지 배움
- 개선해야 할 점 : 도커와 쿠버네티스 사용법을 익혀야 할 것 같음
  
### 📁 참고 자료 및 링크
- 특강 및 카카오 교제(pdf)
